<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <meta name="theme-color" content="#f4f1ea">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <title>Sajj & Stone | The Art of Dough</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,400;0,600;1,600&family=Montserrat:wght@300;400;500&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js"></script>

    <style>
        :root {
            /* Palette: Warm, Nostalgic, Earthy */
            --primary: #d35400; /* Burnt Orange */
            --text-dark: #2c241b; /* Dark Coffee */
            --text-light: #5d5045;
            --bg-body: #f4f1ea; /* Cream / Unbleached Paper */
            --bg-accent: #e8e0d5; 
            
            --font-display: 'Cormorant Garamond', serif; /* Elegant, Old World */
            --font-body: 'Montserrat', sans-serif; /* Clean, Modern */
            
            --spacing-container: 1100px;
            --transition-slow: all 0.6s cubic-bezier(0.22, 1, 0.36, 1);
        }

        /* --- Texture Overlay (The "Flour" Feel) --- */
        body::before {
            content: "";
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.04'/%3E%3C/svg%3E");
            pointer-events: none; z-index: 9999;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }

        html {
            scroll-behavior: smooth;
            -webkit-text-size-adjust: 100%;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: var(--font-body);
            background-color: var(--bg-body);
            color: var(--text-dark);
            line-height: 1.8;
            overflow-x: hidden;
            transition: direction 0.3s ease;
            min-height: 100vh;
        }

        /* Improve touch targets for mobile */
        button, a, .btn-add, .text-btn {
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
        }

        /* --- Typography --- */
        h1, h2, h3, h4 { font-family: var(--font-display); font-weight: 600; line-height: 1.1; }
        .italic-accent { font-style: italic; color: var(--primary); font-family: var(--font-display); }

        /* --- Navbar (Minimalist) --- */
        nav {
            position: fixed; top: 0; width: 100%; z-index: 1000;
            padding: 2rem; display: flex; justify-content: space-between; align-items: center;
            transition: var(--transition-slow);
            background: linear-gradient(to bottom, rgba(244,241,234,0.95), rgba(244,241,234,0));
        }
        nav.scrolled { background: rgba(244,241,234,0.98); padding: 1rem 2rem; border-bottom: 1px solid rgba(0,0,0,0.05); }
        
        .brand { font-size: 1.8rem; font-weight: bold; letter-spacing: -1px; text-decoration: none; color: var(--text-dark); }
        
        .controls { display: flex; gap: 20px; align-items: center; }
        .text-btn { background: none; border: none; cursor: pointer; font-family: var(--font-body); font-size: 0.85rem; letter-spacing: 1px; text-transform: uppercase; color: var(--text-dark); position: relative; transition: color 0.3s; }
        .text-btn::after { content: ''; display: block; width: 0; height: 1px; background: var(--text-dark); transition: 0.3s; }
        .text-btn:hover::after { width: 100%; }

        /* --- Hero (Atmospheric) --- */
        .hero {
            height: 100vh; position: relative; overflow: hidden;
            display: flex; align-items: center; justify-content: center; text-align: center;
        }
        .hero-bg {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: url('https://images.unsplash.com/photo-1542834369-f10ebf06d3e0?q=80&w=2070&auto=format&fit=crop') center/cover no-repeat;
            filter: brightness(0.6); transform: scale(1.1);
            transition: transform 10s ease;
        }
        .hero:hover .hero-bg { transform: scale(1); }
        
        .hero-content { position: relative; z-index: 2; color: #fff; max-width: 800px; padding: 20px; }
        .hero-content h1 { font-size: 4.5rem; margin-bottom: 1rem; opacity: 0; transform: translateY(30px); animation: fadeUp 1s 0.5s forwards; }
        .hero-content p { font-size: 1.4rem; font-family: var(--font-display); font-style: italic; opacity: 0; animation: fadeUp 1s 0.8s forwards; margin-bottom: 2rem;}
        
        .scroll-indicator {
            position: absolute; bottom: 40px; left: 50%; transform: translateX(-50%);
            color: white; font-size: 0.8rem; letter-spacing: 2px; text-transform: uppercase;
            animation: bounce 2s infinite; opacity: 0.7;
        }

        /* --- Categories (Tab-less, organic) --- */
        .filter-nav {
            display: flex; justify-content: center; gap: 40px; padding: 3rem 0;
            position: sticky; top: 70px; z-index: 900; background: var(--bg-body);
        }
        .filter-btn {
            font-family: var(--font-display); font-size: 1.5rem; color: #999;
            background: none; border: none; cursor: pointer; transition: 0.3s;
        }
        .filter-btn.active { color: var(--text-dark); font-style: italic; text-decoration: underline; text-decoration-thickness: 1px; text-underline-offset: 5px; }

        /* --- Menu Narrative Layout (Alternating) --- */
        .menu-container { max-width: var(--spacing-container); margin: 0 auto; padding-bottom: 100px; }
        
        .menu-row {
            display: flex; align-items: center; margin-bottom: 120px; gap: 80px;
            opacity: 0; transform: translateY(50px); transition: all 1s ease;
        }
        .menu-row.visible { opacity: 1; transform: translateY(0); }
        
        .menu-row:nth-child(even) { flex-direction: row-reverse; }

        .img-wrapper {
            flex: 1; height: 500px; position: relative; overflow: hidden; border-radius: 4px;
            box-shadow: 20px 20px 0px rgba(0,0,0,0.05); /* Soft offset shadow */
            background-color: var(--bg-accent);
        }
        .img-wrapper img {
            width: 100%; height: 100%; object-fit: cover; transition: transform 0.8s ease;
            display: block;
        }
        .menu-row:hover .img-wrapper img { transform: scale(1.05); }

        .text-wrapper { flex: 0.8; padding: 20px; }
        .item-cat { font-size: 0.8rem; text-transform: uppercase; letter-spacing: 2px; color: var(--primary); margin-bottom: 10px; display: block; }
        .item-title { font-size: 3rem; margin-bottom: 15px; color: var(--text-dark); }
        .item-desc { color: var(--text-light); font-size: 1.1rem; margin-bottom: 30px; }
        .item-price { font-size: 1.5rem; font-family: var(--font-display); font-style: italic; margin-right: 20px; }
        
        .btn-add {
            display: inline-block; padding: 12px 35px; border: 1px solid var(--text-dark);
            background: transparent; color: var(--text-dark); font-family: var(--font-body);
            font-size: 0.9rem; letter-spacing: 1px; cursor: pointer; transition: 0.3s;
        }
        .btn-add:hover { background: var(--text-dark); color: white; }

        /* --- Footer & Map --- */
        .footer-reveal {
            background: #1a1a1a; color: #888; padding: 80px 20px;
            text-align: center; position: relative; z-index: 10;
        }
        .map-wrapper {
            width: 100%; height: 300px; margin: 40px auto; max-width: 800px;
            border-radius: 2px; transition: 0.3s;
        }

        /* --- Floating Cart Button --- */
        .fab-cart {
            position: fixed; bottom: 30px; right: 30px; width: 70px; height: 70px;
            background: var(--text-dark); color: white; border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2); cursor: pointer; z-index: 1100;
            transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        .fab-cart:hover { transform: scale(1.1); }
        .fab-count {
            position: absolute; top: 0; right: 0; background: var(--primary); width: 25px; height: 25px;
            border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 0.8rem;
        }

        /* --- Checkout Sidebar (Not a modal, a slide-out) --- */
        .cart-sidebar {
            position: fixed; top: 0; right: 0; width: 100%; max-width: 450px; height: 100vh;
            background: #fff; z-index: 2000; transform: translateX(100%);
            transition: transform 0.5s cubic-bezier(0.77, 0, 0.175, 1);
            box-shadow: -10px 0 40px rgba(0,0,0,0.1); display: flex; flex-direction: column;
        }
        .cart-sidebar.open { transform: translateX(0); }
        
        .cart-header { padding: 40px; background: var(--bg-body); display: flex; justify-content: space-between; align-items: center; }
        .cart-body { flex: 1; padding: 40px; overflow-y: auto; }
        .cart-footer { padding: 40px; border-top: 1px solid #eee; background: white; }
        
        .close-cart { font-size: 2rem; cursor: pointer; background: none; border: none; color: var(--text-dark); }
        
        .cart-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            font-family: var(--font-display);
            font-size: 1.2rem;
            padding: 10px;
            border-bottom: 1px solid #f0f0f0;
        }
        
        .cart-item-info {
            flex: 1;
        }
        
        .cart-item-remove {
            font-size: 1.5rem;
            color: #888;
            cursor: pointer;
            margin-left: 15px;
            transition: color 0.3s;
        }
        
        .cart-item-remove:hover {
            color: var(--primary);
        }
        
        .cart-empty-msg {
            text-align: center;
            color: #999;
            font-style: italic;
            padding: 40px 0;
        }
        
        .input-elegant {
            width: 100%; border: none; border-bottom: 1px solid #ccc; padding: 15px 0;
            margin-bottom: 20px; font-family: var(--font-body); font-size: 1rem; outline: none;
            transition: 0.3s;
        }
        .input-elegant:focus { border-color: var(--primary); }
        
        .btn-whatsapp-full {
            width: 100%; background: #2c2c2c; color: white; padding: 20px;
            font-size: 1rem; letter-spacing: 1px; border: none; cursor: pointer;
            transition: 0.3s; margin-top: 10px;
        }
        .btn-whatsapp-full:hover { background: #25D366; }
        .btn-whatsapp-full:disabled {
            background: #ccc;
            cursor: not-allowed;
        }

        /* Animations */
        @keyframes fadeUp { to { opacity: 1; transform: translateY(0); } }
        @keyframes bounce { 
            0%, 20%, 50%, 80%, 100% {transform: translateX(-50%) translateY(0);} 
            40% {transform: translateX(-50%) translateY(-10px);} 
            60% {transform: translateX(-50%) translateY(-5px);} 
        }

        /* Tablet Responsive */
        @media (max-width: 1024px) {
            .menu-container { padding: 0 20px 100px; }
            .menu-row { gap: 40px; margin-bottom: 100px; }
            .img-wrapper { height: 400px; }
            .item-title { font-size: 2.5rem; }
            nav { padding: 1.5rem; }
        }

        /* Mobile Responsive */
        @media (max-width: 768px) {
            :root {
                --spacing-container: 100%;
            }

            nav { padding: 1rem; }
            .brand { font-size: 1.4rem; }
            .controls { gap: 15px; }
            .text-btn { font-size: 0.75rem; }

            .hero-content h1 { font-size: 2.5rem; }
            .hero-content p { font-size: 1.1rem; }
            .scroll-indicator { font-size: 0.7rem; bottom: 20px; }

            .filter-nav { 
                padding: 1.5rem 0; gap: 20px; overflow-x: auto; 
                white-space: nowrap; justify-content: flex-start; padding-left: 20px;
                -webkit-overflow-scrolling: touch;
            }
            .filter-btn { font-size: 1.2rem; }

            .menu-row { 
                flex-direction: column !important; 
                gap: 20px; 
                margin-bottom: 60px; 
                padding: 0 20px; 
            }
            .img-wrapper { 
                width: 100%; 
                height: 280px; 
                box-shadow: 10px 10px 0px rgba(0,0,0,0.05);
            }
            .text-wrapper { padding: 10px 0; }
            .item-cat { font-size: 0.7rem; }
            .item-title { font-size: 1.8rem; }
            .item-desc { font-size: 1rem; margin-bottom: 20px; }
            .item-price { font-size: 1.3rem; margin-right: 15px; }
            .btn-add { padding: 10px 25px; font-size: 0.8rem; }

            .footer-reveal { padding: 60px 20px; }
            .footer-reveal h2 { font-size: 2rem !important; }
            .map-wrapper { height: 250px; margin: 30px auto; }

            .fab-cart { 
                width: 60px; 
                height: 60px; 
                bottom: 20px; 
                right: 20px; 
            }
            .fab-cart i { font-size: 1.2rem; }
            .fab-count { width: 22px; height: 22px; font-size: 0.75rem; }

            .cart-sidebar { max-width: 100%; }
            .cart-header { padding: 30px 20px; }
            .cart-header h2 { font-size: 1.5rem; }
            .cart-body { padding: 20px; }
            .cart-footer { padding: 20px; }
            .cart-item { font-size: 1rem; padding: 8px 0; }
            .input-elegant { padding: 12px 0; font-size: 0.95rem; }
            .btn-whatsapp-full { padding: 16px; font-size: 0.9rem; }
        }

        /* Small Mobile Devices */
        @media (max-width: 480px) {
            .hero-content h1 { font-size: 2rem; }
            .hero-content p { font-size: 1rem; }
            
            .item-title { font-size: 1.5rem; }
            .item-desc { font-size: 0.95rem; }
            
            .menu-row { margin-bottom: 50px; }
            .img-wrapper { height: 240px; }
        }

        /* Landscape Mobile */
        @media (max-width: 768px) and (orientation: landscape) {
            .hero { height: 100vh; }
            .hero-content h1 { font-size: 2rem; }
            .hero-content p { font-size: 1rem; }
            .img-wrapper { height: 300px; }
        }

        /* Very Large Screens */
        @media (min-width: 1400px) {
            .menu-container { max-width: 1300px; }
            .hero-content h1 { font-size: 5rem; }
            .hero-content p { font-size: 1.6rem; }
        }
    </style>
</head>
<body>

    <nav id="navbar">
        <a href="#" class="brand">Sajj & Stone</a>
        <div class="controls">
            <button class="text-btn" id="lang-btn">العربية</button>
            <button class="text-btn" id="curr-btn">LBP</button>
        </div>
    </nav>

    <div class="fab-cart" id="cart-fab">
        <i class="fa-solid fa-basket-shopping"></i>
        <div class="fab-count" id="cart-count">0</div>
    </div>

    <section class="hero">
        <div class="hero-bg"></div>
        <div class="hero-content">
            <h1 data-key="hero_title">Baked with Memory</h1>
            <p data-key="hero_sub">The warmth of the woodfire, the scent of Zaatar.</p>
        </div>
        <div class="scroll-indicator" data-key="scroll">Scroll to Taste</div>
    </section>

    <div class="filter-nav" id="filter-nav">
        <button class="filter-btn active" data-category="all" data-key="cat_all">All</button>
        <button class="filter-btn" data-category="manakeesh" data-key="cat_mana">Manakeesh</button>
        <button class="filter-btn" data-category="mo3ajanat" data-key="cat_mo3">Mo3ajanat</button>
    </div>

    <div class="menu-container" id="menu-container"></div>

    <section class="footer-reveal">
        <h2 style="color:white; font-family: var(--font-display); font-size: 2.5rem;" data-key="loc_title">Find the Oven</h2>
        <p style="margin-top:10px;" data-key="loc_desc">Hidden in the streets of Beirut.</p>
        
        <iframe class="map-wrapper" src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3312.2882823668875!2d35.501776!3d33.893791!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x151f17215880a78f%3A0x729182bae99836b4!2sBeirut!5e0!3m2!1sen!2slb!4v1689600000000!5m2!1sen!2slb" style="border:0;" allowfullscreen="" loading="lazy"></iframe>
        
    </section>

    <div class="cart-sidebar" id="cart-sidebar">
        <div class="cart-header">
            <h2 data-key="cart_header">Your Selection</h2>
            <button class="close-cart" id="close-cart-btn">×</button>
        </div>
        <div class="cart-body" id="cart-body">
            <p class="cart-empty-msg" data-key="cart_empty">Cart is empty</p>
        </div>
        <div class="cart-footer">
            <div style="display:flex; justify-content:space-between; margin-bottom:20px; font-weight:bold; font-size:1.2rem;">
                <span data-key="total">Total</span>
                <span id="cart-total">$0.00</span>
            </div>
            <input type="text" id="c-name" class="input-elegant" placeholder="Your Name">
            <input type="text" id="c-note" class="input-elegant" placeholder="Extra notes (e.g. extra crispy)">
            <button class="btn-whatsapp-full" id="checkout-btn">
                <span data-key="btn_checkout">CONFIRM VIA WHATSAPP</span>
            </button>
        </div>
    </div>

    <script>
        // ==========================================
        // APPLICATION STATE & CONFIGURATION
        // ==========================================
        const APP_CONFIG = {
            exchangeRate: 90000,
            whatsappNumber: '96171563488'
        };

        const APP_STATE = {
            currency: 'USD',
            language: 'en',
            cart: [],
            currentFilter: 'all',
            observer: null
        };

        // ==========================================
        // DATA
        // ==========================================
        const MENU_DATA = [
            { id: 1, cat: 'manakeesh', name: 'Wild Zaatar', name_ar: 'زعتر بري', price: 1.5, img: 'https://www.tastymediterraneo.com/wp-content/uploads/2015/06/tasty-mediterraneo-zaatar-manouche-olive-oil-appetizer-healthy-snack-recipe-vegan-appetizer-savory.jpeg', desc: 'Hand-picked thyme from the southern mountains mixed with virgin olive oil.', desc_ar: 'زعتر جبلي مع زيت زيتون بكر.' },
            { id: 2, cat: 'manakeesh', name: 'Akkawi Cheese', name_ar: 'جبنة عكاوي', price: 3.0, img: 'https://cdn1-m.zahratalkhaleej.ae//wp-content/uploads/2016/01/%D9%85%D9%86%D9%82%D9%88%D8%B4%D8%A9-%D8%AC%D8%A8%D9%86%D8%A9.jpg?v=6&format=jpg&preset=w1900', desc: 'Salty, stretchy white cheese melted to perfection on thin dough.', desc_ar: 'جبنة عكاوي بيضاء ذائبة على عجين رقيق.' },
            { id: 3, cat: 'manakeesh', name: 'Classic Lahm Baajin', name_ar: 'لحم بعجين', price: 3.5, img: 'https://media-cdn.tripadvisor.com/media/photo-s/13/87/5b/6a/sfeiha-lahmajun-manakeesh.jpg', desc: 'Minced beef blend with tomatoes, onions and secret spices.', desc_ar: 'لحم مفروم مع طماطم، بصل وبهارات خاصة.' },
            { id: 4, cat: 'manakeesh', name: 'Kashkawan', name_ar: 'قشقوان', price: 3.5, img: 'https://images.unsplash.com/photo-1513104890138-7c749659a591?q=80&w=900', desc: 'Sharp, sheep milk cheese with a golden crust.', desc_ar: 'جبنة قشقوان حادة المذاق مع قشرة ذهبية.' },
            { id: 5, cat: 'manakeesh', name: 'Kishek Baladi', name_ar: 'كشك بلدي', price: 2.0, img: 'https://hadiaslebanesecuisine.com/blog/wp-content/uploads/2015/07/m-1.jpg', desc: 'Dried yogurt powder rehydrated with sesame and tomato.', desc_ar: 'بودرة زبادي مجفف مع سمسم وطماطم.' },
            { id: 6, cat: 'mo3ajanat', name: 'Spinach Fatayer', name_ar: 'فطاير سبانخ', price: 0.5, img: 'https://www.carolinescooking.com/wp-content/uploads/2022/04/spinach-fatayer-featured-pic-sq.jpg', desc: 'Sour spinach triangles with sumac and lemon.', desc_ar: 'مثلثات سبانخ حامضة مع سماق وليمون.' },
            { id: 7, cat: 'mo3ajanat', name: 'Meat Sambousek', name_ar: 'سمبوسك لحمة', price: 0.6, img: 'https://www.nestle-family.com/sites/site.prod1.nestle-family.com/files/2019-04/16728---Fried-Meat-Sambousek_1.jpg', desc: 'Crispy fried dough stuffed with seasoned meat.', desc_ar: 'عجين مقلي محشو باللحم المتبل.' },
            { id: 8, cat: 'mo3ajanat', name: 'Pizza Rolls', name_ar: 'رولز بيتزا', price: 0.6, img: 'https://www.sweetandspicy.de/wp-content/uploads/2023/02/Pizzaschnecken..-600x321.jpg', desc: 'Mini bites of tomato sauce, olives and cheese.', desc_ar: 'قطع صغيرة بصلصة الطماطم والزيتون والجبنة.' },
            { id: 9, cat: 'mo3ajanat', name: 'Hotdog Rolls', name_ar: 'رولز هوت دوج', price: 0.6, img: 'https://www.yeoldeoak.co.uk/wp-content/uploads/2020/03/mini-hot-dog-rolls.jpg', desc: 'Premium sausage wrapped in fluffy cloud dough.', desc_ar: 'نقانق ممتازة ملفوفة بعجين طري.' },
        ];

        const TRANSLATIONS = {
            en: { 
                hero_title: 'Baked with Memory', 
                hero_sub: 'The warmth of the woodfire, the scent of Zaatar.', 
                scroll: 'Scroll to Taste',
                cat_all: 'All', 
                cat_mana: 'Manakeesh', 
                cat_mo3: 'Mo3ajanat',
                cart_header: 'Your Selection', 
                total: 'Total', 
                btn_checkout: 'CONFIRM VIA WHATSAPP',
                loc_title: 'Find the Oven', 
                loc_desc: 'Hidden in the streets of Beirut.',
                add: 'TASTE THIS', 
                cart_empty: 'Cart is empty',
                name_placeholder: 'Your Name',
                note_placeholder: 'Extra notes (e.g. extra crispy)',
                name_required: 'Please enter your name'
            },
            ar: { 
                hero_title: 'مخبوزة من الذاكرة', 
                hero_sub: 'دفء الحطب، ورائحة الزعتر.', 
                scroll: 'تصفح القائمة',
                cat_all: 'الكل', 
                cat_mana: 'مناقيش', 
                cat_mo3: 'معجنات',
                cart_header: 'اختياراتك', 
                total: 'المجموع', 
                btn_checkout: 'تأكيد الطلب واتساب',
                loc_title: 'موقعنا', 
                loc_desc: 'في أزقة بيروت العتيقة.',
                add: 'أضف للطلب', 
                cart_empty: 'السلة فارغة',
                name_placeholder: 'الاسم الكريم',
                note_placeholder: 'ملاحظات...',
                name_required: 'الرجاء إدخال الاسم'
            }
        };

        // ==========================================
        // UTILITY FUNCTIONS
        // ==========================================
        const Utils = {
            formatPrice(price, currency) {
                if (currency === 'USD') {
                    return `$${price.toFixed(2)}`;
                }
                return `${(price * APP_CONFIG.exchangeRate).toLocaleString()} LBP`;
            },

            getItemName(item, language) {
                return language === 'en' ? item.name : item.name_ar;
            },

            getItemDesc(item, language) {
                return language === 'en' ? item.desc : item.desc_ar;
            },

            translate(key) {
                return TRANSLATIONS[APP_STATE.language][key] || key;
            }
        };

        // ==========================================
        // DOM MANIPULATION
        // ==========================================
        const DOM = {
            getElement(id) {
                return document.getElementById(id);
            },

            getAllElements(selector) {
                return document.querySelectorAll(selector);
            },

            updateTextContent(selector, text) {
                const elements = this.getAllElements(selector);
                elements.forEach(el => el.textContent = text);
            },

            setAttributes(element, attributes) {
                Object.keys(attributes).forEach(key => {
                    element.setAttribute(key, attributes[key]);
                });
            }
        };

        // ==========================================
        // MENU RENDERING
        // ==========================================
        const MenuRenderer = {
            render(category = 'all') {
                const container = DOM.getElement('menu-container');
                if (!container) return;

                container.innerHTML = '';
                
                const filteredMenu = category === 'all' 
                    ? MENU_DATA 
                    : MENU_DATA.filter(item => item.cat === category);

                filteredMenu.forEach(item => {
                    const row = this.createMenuRow(item);
                    container.appendChild(row);
                });

                this.setupIntersectionObserver();
            },

            createMenuRow(item) {
                const row = document.createElement('div');
                row.className = 'menu-row';
                
                const name = Utils.getItemName(item, APP_STATE.language);
                const desc = Utils.getItemDesc(item, APP_STATE.language);
                const price = Utils.formatPrice(item.price, APP_STATE.currency);
                const btnText = Utils.translate('add');

                row.innerHTML = `
                    <div class="img-wrapper">
                        <img src="${item.img}" alt="${name}" loading="lazy">
                    </div>
                    <div class="text-wrapper">
                        <span class="item-cat">/ ${item.cat}</span>
                        <h3 class="item-title">${name}</h3>
                        <p class="item-desc">${desc}</p>
                        <div style="display:flex; align-items:center;">
                            <span class="item-price">${price}</span>
                            <button class="btn-add" data-item-id="${item.id}">${btnText}</button>
                        </div>
                    </div>
                `;

                return row;
            },

            setupIntersectionObserver() {
                // Disconnect previous observer if it exists
                if (APP_STATE.observer) {
                    APP_STATE.observer.disconnect();
                }

                APP_STATE.observer = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            entry.target.classList.add('visible');
                        }
                    });
                }, { threshold: 0.15 });

                const rows = DOM.getAllElements('.menu-row');
                rows.forEach(row => APP_STATE.observer.observe(row));
            }
        };

        // ==========================================
        // CART MANAGEMENT
        // ==========================================
        const Cart = {
            add(itemId) {
                const item = MENU_DATA.find(i => i.id === itemId);
                if (!item) return;

                APP_STATE.cart.push(item);
                this.update();
                CartUI.open();
            },

            remove(index) {
                if (index >= 0 && index < APP_STATE.cart.length) {
                    APP_STATE.cart.splice(index, 1);
                    this.update();
                }
            },

            clear() {
                APP_STATE.cart = [];
                this.update();
            },

            getTotal() {
                return APP_STATE.cart.reduce((sum, item) => sum + item.price, 0);
            },

            getItemCounts() {
                const counts = {};
                APP_STATE.cart.forEach(item => {
                    counts[item.id] = (counts[item.id] || 0) + 1;
                });
                return counts;
            },

            update() {
                CartUI.render();
                this.updateCounter();
            },

            updateCounter() {
                const counter = DOM.getElement('cart-count');
                if (counter) {
                    counter.textContent = APP_STATE.cart.length;
                }
            }
        };

        // ==========================================
        // CART UI
        // ==========================================
        const CartUI = {
            render() {
                const body = DOM.getElement('cart-body');
                const total = DOM.getElement('cart-total');
                
                if (!body || !total) return;

                body.innerHTML = '';

                if (APP_STATE.cart.length === 0) {
                    body.innerHTML = `<p class="cart-empty-msg" data-key="cart_empty">${Utils.translate('cart_empty')}</p>`;
                    total.textContent = Utils.formatPrice(0, APP_STATE.currency);
                    return;
                }

                APP_STATE.cart.forEach((item, index) => {
                    const cartItem = this.createCartItem(item, index);
                    body.appendChild(cartItem);
                });

                const totalAmount = Cart.getTotal();
                total.textContent = Utils.formatPrice(totalAmount, APP_STATE.currency);
            },

            createCartItem(item, index) {
                const div = document.createElement('div');
                div.className = 'cart-item';
                
                const name = Utils.getItemName(item, APP_STATE.language);
                const price = Utils.formatPrice(item.price, APP_STATE.currency);
                
                div.innerHTML = `
                    <div class="cart-item-info">
                        <div>${name}</div>
                        <div style="font-size: 0.9rem; color: #888;">${price}</div>
                    </div>
                    <span class="cart-item-remove" data-remove-index="${index}">×</span>
                `;
                
                return div;
            },

            open() {
                const sidebar = DOM.getElement('cart-sidebar');
                if (sidebar) {
                    sidebar.classList.add('open');
                }
            },

            close() {
                const sidebar = DOM.getElement('cart-sidebar');
                if (sidebar) {
                    sidebar.classList.remove('open');
                }
            },

            toggle() {
                const sidebar = DOM.getElement('cart-sidebar');
                if (sidebar) {
                    sidebar.classList.toggle('open');
                }
            }
        };

        // ==========================================
        // CHECKOUT
        // ==========================================
        const Checkout = {
            process() {
                if (APP_STATE.cart.length === 0) {
                    alert(Utils.translate('cart_empty'));
                    return;
                }

                const nameInput = DOM.getElement('c-name');
                const noteInput = DOM.getElement('c-note');
                
                const name = nameInput ? nameInput.value.trim() : '';
                const note = noteInput ? noteInput.value.trim() : '';

                if (!name) {
                    alert(Utils.translate('name_required'));
                    return;
                }

                const message = this.buildWhatsAppMessage(name, note);
                this.sendWhatsApp(message);
            },

            buildWhatsAppMessage(name, note) {
                let message = `*Order for ${name}*%0A%0A`;
                
                const counts = Cart.getItemCounts();
                let total = 0;
                
                Object.keys(counts).forEach(id => {
                    const item = MENU_DATA.find(i => i.id == id);
                    if (!item) return;
                    
                    const count = counts[id];
                    const itemTotal = item.price * count;
                    total += itemTotal;
                    
                    message += `${count}x ${item.name} ($${itemTotal.toFixed(2)})%0A`;
                });

                message += `%0A*Total:* $${total.toFixed(2)} (${(total * APP_CONFIG.exchangeRate).toLocaleString()} LBP)`;
                
                if (note) {
                    message += `%0A*Note:* ${encodeURIComponent(note)}`;
                }

                return message;
            },

            sendWhatsApp(message) {
                const url = `https://wa.me/${APP_CONFIG.whatsappNumber}?text=${message}`;
                window.open(url, '_blank');
            }
        };

        // ==========================================
        // LANGUAGE & CURRENCY
        // ==========================================
        const Localization = {
            toggleLanguage() {
                APP_STATE.language = APP_STATE.language === 'en' ? 'ar' : 'en';
                
                // Update document direction
                document.body.dir = APP_STATE.language === 'ar' ? 'rtl' : 'ltr';
                
                // Update button text
                const langBtn = DOM.getElement('lang-btn');
                if (langBtn) {
                    langBtn.textContent = APP_STATE.language === 'en' ? 'العربية' : 'English';
                }
                
                this.updateAllTranslations();
                MenuRenderer.render(APP_STATE.currentFilter);
                CartUI.render();
            },

            toggleCurrency() {
                APP_STATE.currency = APP_STATE.currency === 'USD' ? 'LBP' : 'USD';
                
                // Update button text
                const currBtn = DOM.getElement('curr-btn');
                if (currBtn) {
                    currBtn.textContent = APP_STATE.currency;
                }
                
                MenuRenderer.render(APP_STATE.currentFilter);
                CartUI.render();
            },

            updateAllTranslations() {
                const elements = DOM.getAllElements('[data-key]');
                elements.forEach(el => {
                    const key = el.getAttribute('data-key');
                    if (key) {
                        el.textContent = Utils.translate(key);
                    }
                });

                // Update input placeholders
                const nameInput = DOM.getElement('c-name');
                const noteInput = DOM.getElement('c-note');
                
                if (nameInput) {
                    nameInput.placeholder = Utils.translate('name_placeholder');
                }
                if (noteInput) {
                    noteInput.placeholder = Utils.translate('note_placeholder');
                }
            }
        };

        // ==========================================
        // FILTERS
        // ==========================================
        const Filters = {
            apply(category) {
                APP_STATE.currentFilter = category;
                
                // Update active button
                const buttons = DOM.getAllElements('.filter-btn');
                buttons.forEach(btn => {
                    btn.classList.remove('active');
                    if (btn.getAttribute('data-category') === category) {
                        btn.classList.add('active');
                    }
                });

                MenuRenderer.render(category);
            }
        };

        // ==========================================
        // SCROLL EFFECTS
        // ==========================================
        const ScrollEffects = {
            init() {
                let lastScroll = 0;
                const navbar = DOM.getElement('navbar');

                window.addEventListener('scroll', () => {
                    const currentScroll = window.pageYOffset;

                    if (navbar) {
                        if (currentScroll > 50) {
                            navbar.classList.add('scrolled');
                        } else {
                            navbar.classList.remove('scrolled');
                        }
                    }

                    lastScroll = currentScroll;
                });
            }
        };

        // ==========================================
        // EVENT HANDLERS
        // ==========================================
        const EventHandlers = {
            init() {
                // Language button
                const langBtn = DOM.getElement('lang-btn');
                if (langBtn) {
                    langBtn.addEventListener('click', () => Localization.toggleLanguage());
                }

                // Currency button
                const currBtn = DOM.getElement('curr-btn');
                if (currBtn) {
                    currBtn.addEventListener('click', () => Localization.toggleCurrency());
                }

                // Cart FAB
                const cartFab = DOM.getElement('cart-fab');
                if (cartFab) {
                    cartFab.addEventListener('click', () => CartUI.toggle());
                }

                // Close cart button
                const closeCartBtn = DOM.getElement('close-cart-btn');
                if (closeCartBtn) {
                    closeCartBtn.addEventListener('click', () => CartUI.close());
                }

                // Checkout button
                const checkoutBtn = DOM.getElement('checkout-btn');
                if (checkoutBtn) {
                    checkoutBtn.addEventListener('click', () => Checkout.process());
                }

                // Filter buttons
                const filterNav = DOM.getElement('filter-nav');
                if (filterNav) {
                    filterNav.addEventListener('click', (e) => {
                        if (e.target.classList.contains('filter-btn')) {
                            const category = e.target.getAttribute('data-category');
                            if (category) {
                                Filters.apply(category);
                            }
                        }
                    });
                }

                // Event delegation for add to cart buttons
                const menuContainer = DOM.getElement('menu-container');
                if (menuContainer) {
                    menuContainer.addEventListener('click', (e) => {
                        if (e.target.classList.contains('btn-add')) {
                            const itemId = parseInt(e.target.getAttribute('data-item-id'));
                            if (itemId) {
                                Cart.add(itemId);
                            }
                        }
                    });
                }

                // Event delegation for remove cart items
                const cartBody = DOM.getElement('cart-body');
                if (cartBody) {
                    cartBody.addEventListener('click', (e) => {
                        if (e.target.classList.contains('cart-item-remove')) {
                            const index = parseInt(e.target.getAttribute('data-remove-index'));
                            if (!isNaN(index)) {
                                Cart.remove(index);
                            }
                        }
                    });
                }
            }
        };

        // ==========================================
        // APPLICATION INITIALIZATION
        // ==========================================
        const App = {
            init() {
                // Render initial menu
                MenuRenderer.render('all');
                
                // Setup event handlers
                EventHandlers.init();
                
                // Setup scroll effects
                ScrollEffects.init();
                
                // Initialize cart UI
                CartUI.render();
                
                // Update all translations
                Localization.updateAllTranslations();
            }
        };

        // ==========================================
        // START APPLICATION
        // ==========================================
        document.addEventListener('DOMContentLoaded', () => {
            App.init();
        });
    </script>
</body>
</html>

